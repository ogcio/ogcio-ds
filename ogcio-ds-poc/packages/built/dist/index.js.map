{"mappings":"YAYO,SAASA,EAAcC,GAC5B,MAAMC,OAAEA,GAAWD,EAIe,WAAhCC,EAAOC,aAAa,SACJ,UAAfF,EAAMG,MAlBO,KAkBaH,EAAMI,UAEjCJ,EAAMK,iBAENJ,EAAOK,Q,CAYJ,SAASC,EAAcC,EAAOR,GAEnC,GAAIQ,EAEF,OADAR,EAAMK,kBACC,EAGTG,EAAQC,YAAW,KACjBD,EAAQ,IAAI,GACXE,I,CCzCE,MAAMC,EACXC,aAAYC,QAAEA,IACRA,EAAQC,QAAQ,+BAClBC,KAAKC,cAAgB,KAErBH,EAAQI,iBACN,QACAV,EAAcW,KAAKH,KAAMA,KAAKC,iBAIlCH,EAAQI,iBAAiB,UAAWlB,E,ECOxC,SAASoB,IACP,OAXqBC,EAWA,gBAXUC,EAWOV,MAVtC,IAAIW,SAASC,iBAAiBH,IAAWI,SAASX,KATpD,SAAuBA,GACrB,OAAOA,EAAQC,QAAQW,U,EAShBC,CAAcb,KACjB,IAAIQ,EAAU,C,QAAER,IAPtB,SAAyBA,GACvBA,EAAQC,QAAQW,WAAa,a,CAQzBE,CAAgBd,G,IALtB,IAAuBO,EAAUC,C,CAcjC,SAASO,IACPT,G,CAIwB,aAAxBG,SAASO,YACe,gBAAxBP,SAASO,WAGTpB,WAAWmB,EAAiB,GAE5BN,SAASL,iBAAiB,mBAAoBW,GAG1B,oBAAXE,SACTA,OAAOC,MAAQD,OAAOC,OAAS,C,OAC7BpB,E,YACAQ,G","sources":["packages/components/src/Button/Button.common.js","packages/components/src/Button/Button.core.js","packages/components/core.js"],"sourcesContent":["const KEY_SPACE = 32;\nconst DEBOUNCE_TIMEOUT_IN_SECONDS = 1;\n\n/**\n * JavaScript 'shim' to trigger the click event of element(s) when the space key is pressed.\n *\n * Created since some Assistive Technologies (for example some Screenreaders)\n * will tell a user to press space on a 'button', so this functionality needs to be shimmed\n * See https://github.com/alphagov/govuk_elements/pull/272#issuecomment-233028270\n *\n * @param {KeyboardEvent} event event\n */\nexport function handleKeyDown(event) {\n  const { target } = event;\n\n  // if the element has a role='button' and the pressed key is a space, we'll simulate a click\n  if (\n    target.getAttribute('role') === 'button' &&\n    (event.code === 'space' || event.keyCode === KEY_SPACE)\n  ) {\n    event.preventDefault();\n    // trigger the target's click event\n    target.click();\n  }\n}\n\n/**\n * If the click quickly succeeds a previous click then nothing will happen.\n * This stops people accidentally causing multiple form submissions by\n * double clicking buttons.\n *\n * @param {Number} timer\n * @param {MouseEvent} event\n */\nexport function debounceClick(timer, event) {\n  // If the timer is still running then we want to prevent the click from submitting the form\n  if (timer) {\n    event.preventDefault();\n    return true;\n  }\n\n  timer = setTimeout(() => {\n    timer = null;\n  }, DEBOUNCE_TIMEOUT_IN_SECONDS * 1000);\n}\n","import { debounceClick, handleKeyDown } from './Button.common';\n\nexport class Button {\n  constructor({ element }) {\n    if (element.dataset['data-prevent-double-click']) {\n      this.debounceTimer = null;\n\n      element.addEventListener(\n        'click',\n        debounceClick.bind(this, this.debounceTimer)\n      );\n    }\n\n    element.addEventListener('keydown', handleKeyDown);\n  }\n}\n","import { Button } from './src/Button/Button.core';\n\nfunction isInitialized(element) {\n  return element.dataset.ogcioState;\n}\n\nfunction markInitialized(element) {\n  element.dataset.ogcioState = 'initialized';\n}\n\nfunction initComponent(selector, Component) {\n  [...document.querySelectorAll(selector)].forEach((element) => {\n    if (!isInitialized(element)) {\n      new Component({ element });\n\n      markInitialized(element);\n    }\n  });\n}\n\nfunction initButtons() {\n  return initComponent('.ogcio-button', Button);\n}\n\nfunction onDocumentReady() {\n  initButtons();\n}\n\nif (\n  document.readyState === 'complete' ||\n  document.readyState === 'interactive'\n) {\n  // call on next tick\n  setTimeout(onDocumentReady, 0);\n} else {\n  document.addEventListener('DOMContentLoaded', onDocumentReady);\n}\n\nif (typeof window !== 'undefined') {\n  window.OGCIO = window.OGCIO || {\n    Button,\n    initButtons,\n  };\n}\n"],"names":["$fc7494da1bb95b70$export$bab59f27a7347e45","event","target","getAttribute","code","keyCode","preventDefault","click","$fc7494da1bb95b70$export$9a84631957f0e161","timer","setTimeout","$fc7494da1bb95b70$var$DEBOUNCE_TIMEOUT_IN_SECONDS","$3df5e51ba0be0d0d$export$353f5b6fc5456de1","constructor","element","dataset","this","debounceTimer","addEventListener","bind","$324f30b4d22b7aaf$var$initButtons","selector","Component","document","querySelectorAll","forEach","ogcioState","$324f30b4d22b7aaf$var$isInitialized","$324f30b4d22b7aaf$var$markInitialized","$324f30b4d22b7aaf$var$onDocumentReady","readyState","window","OGCIO"],"version":3,"file":"index.js.map"}